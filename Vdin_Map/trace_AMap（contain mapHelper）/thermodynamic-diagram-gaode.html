<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>热力分布图</title>
  <style type="text/css">
    #container {
      width: 100%; 
      height: 600px; 
    }
    #container2 {
      width: 100%; 
      height: 600px; 
    }
    .btn{
      width:48%;
      height:60px;
      line-height:60px; 
      text-align:center;
      cursor:pointer;
      display: inline-block;
    }
    </style>
  </style>
</head>
<body>
  <div id="container"></div> 
  <canvas id="container2"></canvas>
  <!-- <canvas id="container2"></canvas>  -->
<!--   <div id="btn_pane">
    <div onclick="openHeatmap();" class="btn">显示热力图</div>
    <div onclick="closeHeatmap();" class="btn">关闭热力图</div>
  </div> -->

  <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=4a02ed48f4b1afabb52e6103e24595a0"></script>
  <script type="text/javascript" src="heatmap.min.js"></script>
  <script type="text/javascript">
    var map = new AMap.Map("container",{ 
      // view: new AMap.View2D({
          center:new AMap.LngLat(115, 39.39),
          zoom: 12
      // })
    });

    //判断浏览区是否支持canvas
    // function isSupportCanvas(){
    //   var elem = document.createElement('canvas');
    //   return !!(elem.getContext && elem.getContext('2d'));
    // }

    // if(!isSupportCanvas()){
    //   alert('热力图仅对支持canvas的浏览器适用,您所使用的浏览器不能使用热力图功能,请换个浏览器试试~')
    // }

    var config = {
      container: document.getElementById('container2'),
      radius: 15,
      opacity: [0,0.8],
      gradient: {
        0.5: 'blue',
        0.65: 'rgb(117,211,248)',
        0.7: 'rgb(0, 255, 0)',
        0.9: '#ffea00',
        1.0: 'red'
      }
    };
    var heatmapInstance = h337.create(config);

    var points = [
      {"x":415,"y":129,"value":10},
      {"x":435,"y":138,"value":60},
      {"x":315,"y":147,"value":30},
      {"x":425,"y":129,"value":100},
      {"x":345,"y":138,"value":80},
      {"x":455,"y":147,"value":30},
      {"x":315,"y":166,"value":40},
      {"x":355,"y":135,"value":50},
      {"x":475,"y":114,"value":60},
      {"x":335,"y":223,"value":70},
      {"x":525,"y":292,"value":80},
      {"x":515,"y":201,"value":90},
      {"x":315,"y":230,"value":100}
    ];
    // var points = [
    //   {"lng":115,"lat":39,"count":10},
    //   {"lng":115,"lat":38,"count":20},
    //   {"lng":115,"lat":37,"count":30},
    //   {"lng":115,"lat":36,"count":40},
    //   {"lng":115,"lat":35,"count":50},
    //   {"lng":115,"lat":34,"count":60},
    //   {"lng":115,"lat":33,"count":70},
    //   {"lng":115,"lat":32,"count":80},
    //   {"lng":115,"lat":31,"count":90},
    //   {"lng":115,"lat":30,"count":100}
    // ];
    heatmapInstance.getData(points);

    var data = {
      max: 100,
      data: points
    };
    heatmapInstance.setData(data);

    // var heatmap;
    // map.plugin(["AMap.Heatmap"],function() {
    //   //初始化heatmap对象
    //   heatmap = new AMap.Heatmap(map, {
    //     radius: 25, //给定半径
    //     opacity: [0,0.8],
    //     gradient:{
    //       0.5: 'blue',
    //       0.65: 'rgb(117,211,248)',
    //       0.7: 'rgb(0, 255, 0)',
    //       0.9: '#ffea00',
    //       1.0: 'red'
    //     }
    //   });
    //   //设置数据集  
    //   heatmap.setDataSet( {data: points, max: 100} );
    // }); 

    // //显示热力图
    // function openHeatmap(){
    //   heatmap.show();
    // }

    // //隐藏热力图
    // function closeHeatmap(){
    //   heatmap.hide();
    // }

    
  </script>
</body>
</html>